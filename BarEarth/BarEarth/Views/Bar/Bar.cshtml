@model BarEarth.Models.Bar
@{ViewData["Title"] = "Address";}


@{
    ViewBag.Title = Model.Name;
    var comments = (IEnumerable<BarEarth.Models.Rating>)ViewBag.Comments;
    var ratingSum = ViewBag.RatingSum;
    var ratingCount = ViewBag.RatingCount;

    decimal rating = 0;
    if (ratingCount > 0)
    {
        rating = (ratingSum / ratingCount);
    }
    var totalRating = decimal.Parse(rating.ToString());
}



<div class="card mb-3" style="width: 70rem;  background-color: #fff; margin:auto; margin-top: 10vh;">
    <img class="card-img-top" src="https://www.scandichotels.se/imageVault/publishedmedia/suw58cmdyrxfvvjep2a5/Scandic-Malmen-Interior-bar-Lilla-hotellbaren-over.jpg" style="height:200px;" />
    <div class="card-img-overlay d-flex flex-row-reverse ">
        <button type="button" class="btn btn-primary bmd-btn-fab" style="margin-top: 150px;">
            <i class="material-icons">directions</i>
        </button>
    </div>
    <div class="card-header text-white" style="background-color:#2195F2">
        <h2 class="card-title">@Model.Name</h2>
        <h6>

            <i class="material-icons">star</i>
            <i class="material-icons">star</i>
            <i class="material-icons">star</i>
            <i class="material-icons">star_half</i>
            <i class="material-icons">star_border</i>
            • 302 Reviews
        </h6>
        <h6 class="card-subtitle">Sport-bar</h6>
    </div>
    <div class="card-body">
        <!--Put map in here-->
        <div>
            <img class="" src="http://images.indianexpress.com/2017/05/google-maps-759.jpg" />
        </div>

        <hr />

        <div id="BarImages" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="https://www.scandichotels.se/imageVault/publishedmedia/suw58cmdyrxfvvjep2a5/Scandic-Malmen-Interior-bar-Lilla-hotellbaren-over.jpg" alt="First slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://www.scandichotels.se/imageVault/publishedmedia/suw58cmdyrxfvvjep2a5/Scandic-Malmen-Interior-bar-Lilla-hotellbaren-over.jpg" alt="Second slide">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="https://www.scandichotels.se/imageVault/publishedmedia/suw58cmdyrxfvvjep2a5/Scandic-Malmen-Interior-bar-Lilla-hotellbaren-over.jpg" alt="Third slide">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <hr />

        <!--Comment section-->
        <h4 class="card-header">Comments</h4>
        <!--Here does the users comment and score sit-->
        @*<form>*@
        @*<div class="form-group">
                <label for="exampleTextarea" class="bmd-label-floating">Enter your comment here!</label>
                <textarea class="form-control" id="exampleTextarea" rows="4"></textarea>
                <span class="bmd-help">Will we put text here?</span>
            </div>
            <button class="btn btn-default">Cancel</button>
            <button type="submit" class="btn btn-primary btn-raised">Submit</button>*@

        @Html.Partial("_CommentBox")
        @*</form>*@

        @{
            var lastThreeComments = comments.TakeLast(3).Reverse();
        }

        @foreach (var c in lastThreeComments)
        {

            <div class="card-columns card-group">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">@c.UserName</h5>
                        <h6 class="card-subtitle mb-2 text-muted">


                            @for (var i = 1; i <= c.Rate; i++)
                            {
                            <i class="material-icons">
                                star
                            </i>
                            }
                            @for (var i = (c.Rate + 1); i <= 5; i++)
                            {
                                <i class="material-icons">
                                    star_border
                                </i>
                            }

                        </h6>
                        <p class="card-text">@c.Review</p>
                        <div class="card-footer">
                            <p class="card-text"><small class="text-muted">@c.DateTime</small></p>
                        </div>
                    </div>
                </div>
            </div>

        }
        <!--Here is all comments and reviews-->



        <div id="collapseOne" class="collapse " aria-labelledby="headingOne" data-parent="#accordion">


        </div>

        <div class="card-header nav justify-content-center" id="CommentSection">
            <button class="btn btn-link nav-item" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <i class="material-icons">keyboard_arrow_down</i>
            </button>
        </div>



        <div class="card-text">

        </div>

    </div>
    <div class="card-footer">Importat stuff</div>
</div>


<script>
        function SCRate() {
            for (var i = 1; i <= @totalRating; i++) {
                $("#sRate" + i).attr('class', 'starGlowN');


            }
        }
        $(function(){
            SCRate();
        });
</script>
